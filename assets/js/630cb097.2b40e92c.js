"use strict";(self.webpackChunkexamples_classic=self.webpackChunkexamples_classic||[]).push([[707],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>b});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),p=c(a),b=r,m=p["".concat(l,".").concat(b)]||p[b]||u[b]||s;return a?n.createElement(m,o(o({ref:t},d),{},{components:a})):n.createElement(m,o({ref:t},d))}));function b(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=a.length,o=new Array(s);o[0]=p;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var c=2;c<s;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}p.displayName="MDXCreateElement"},2159:(e,t,a)=>{a.r(t),a.d(t,{contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var n=a(7462),r=(a(7294),a(3905));const s={},o="Front-Backend",i={unversionedId:"backend/front-backend",id:"backend/front-backend",isDocsHomePage:!1,title:"Front-Backend",description:"As seen in back-backend#recieve-request the server transforms data received from node-red into displayable data (color, text).",source:"@site/docs/backend/2-front-backend.md",sourceDirName:"backend",slug:"/backend/front-backend",permalink:"/wimp-wiki/docs/backend/front-backend",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/backend/2-front-backend.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Introduction",permalink:"/wimp-wiki/docs/backend/intro"},next:{title:"Back-Backend",permalink:"/wimp-wiki/docs/backend/back-backend"}},l=[{value:"Needs:",id:"needs",children:[{value:"to be able to match a specific message to a certain state",id:"to-be-able-to-match-a-specific-message-to-a-certain-state",children:[]},{value:"to be able to manage the visibility of the messages according to the students",id:"to-be-able-to-manage-the-visibility-of-the-messages-according-to-the-students",children:[]},{value:"to be able to deactivate its presence on the site",id:"to-be-able-to-deactivate-its-presence-on-the-site",children:[]}]},{value:"login/security",id:"loginsecurity",children:[]},{value:"?",id:"",children:[]}],c={toc:l};function d(e){let{components:t,...s}=e;return(0,r.kt)("wrapper",(0,n.Z)({},c,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"front-backend"},"Front-Backend"),(0,r.kt)("p",null,"As seen in ",(0,r.kt)("a",{href:"./back-backend#recieve-request"},"back-backend#recieve-request")," the server transforms data received from node-red into displayable data (color, text).\nTo do this the server matches the raw data to the sentence and color that the teacher has chosen. "),(0,r.kt)("p",null,"Example : ",(0,r.kt)("br",null),"\nnode-red side -> ",(0,r.kt)("em",{parentName:"p"},"when my plug is connected I generate the availability status ",(0,r.kt)("strong",{parentName:"em"},"1")),(0,r.kt)("br",null),"\nexpress side -> ",(0,r.kt)("em",{parentName:"p"},"for me the state 1 corresponds to ",(0,r.kt)("strong",{parentName:"em"},'"I am available"')," in ",(0,r.kt)("strong",{parentName:"em"},"green"))),(0,r.kt)("p",null,"However, to do this, express must retrieve its own information from a database, its why the front-backend (graphical interface) is necessary to allow teachers to modify their messages, add states, change the color of some messages etc..."),(0,r.kt)("h2",{id:"needs"},"Needs:"),(0,r.kt)("p",null,"After discussion we have established 3 needs:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"to be able to match a specific state (from node-red) to a certain message "),(0,r.kt)("li",{parentName:"ul"},"to be able to manage the visibility of the messages according to the students level/role"),(0,r.kt)("li",{parentName:"ul"},'to be able to disabled its presence on the site (to be in an "Disconnected" message no matter what information the devices sent)')),(0,r.kt)("h3",{id:"to-be-able-to-match-a-specific-message-to-a-certain-state"},"to be able to match a specific message to a certain state"),(0,r.kt)("p",null,"Chaque etat brute renvoy\xe9 par node-red doit avoir un corespondance propre constitu\xe9 d'un message et d'une coleur d'affichage"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'// database/staff.json\n"id professeur": {\n    ...\n    "states": {\n        "1": {\n            "msg": "in his office but busy",\n            "color": "orange",\n        },\n        ...\n    }\n} \n')),(0,r.kt)("p",null,"On the site :\n",(0,r.kt)("img",{alt:"alt text",src:a(18).Z})),(0,r.kt)("h3",{id:"to-be-able-to-manage-the-visibility-of-the-messages-according-to-the-students"},"to be able to manage the visibility of the messages according to the students"),(0,r.kt)("p",null,"Every teacher to want to limit some message only to the 'researcher' for example. To do this a chmaps has been added to filter this. If a grade is set to false then that grade will see a default message instead of the true message."),(0,r.kt)("p",null,"this default message is related to the colors, if the color of the real message is red it must mean that the teacher is not available. The real message will be ",(0,r.kt)("em",{parentName:"p"},"'In meeting with the director'")," in red, the default message will then be the one in the field ",(0,r.kt)("inlineCode",{parentName:"p"},'"unavailable":')," which could be ",(0,r.kt)("em",{parentName:"p"},"'not available'"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'// database/staff.json\n"id professeur": {\n    ...\n    "states": {\n        "1": {\n            "msg": "in his office but busy",\n            "color": "orange",\n            "visibility": { // <--- \n                "student": false,\n                "researcher": true,\n                "colleague": true\n            }\n        },\n        ...\n    },\n\n    "default": { // <--- \n            "available": "I\'m available !",\n            "busy": "I\'m busy !",\n            "unavailable": "I\'m unavailable !"\n    }\n}\n\n')),(0,r.kt)("p",null,"On the site :\n",(0,r.kt)("img",{alt:"alt text",src:a(9963).Z}),"\n",(0,r.kt)("img",{alt:"alt text",src:a(4748).Z})),(0,r.kt)("h3",{id:"to-be-able-to-deactivate-its-presence-on-the-site"},"to be able to deactivate its presence on the site"),(0,r.kt)("p",null,'It should also be possible to completely deactivate everything in order to be "untracked". For this purpose a field ',(0,r.kt)("inlineCode",{parentName:"p"},'"tracking":')," has been set up "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'// database/staff.json\n"id professeur": {\n    ...\n    "states": {\n        "1": {\n            "msg": "in his office but busy",\n            "color": "orange",\n            "visibility": { \n                "student": false,\n                "researcher": true,\n                "colleague": true\n            }\n        },\n        ...\n    },\n\n    "default": {  \n            "available": "I\'m available !",\n            "busy": "I\'m busy !",\n            "unavailable": "I\'m unavailable !"\n    },\n    "tracking": "ON" // <---\n}\n')),(0,r.kt)("p",null,"On the site :\n",(0,r.kt)("img",{alt:"alt text",src:a(9703).Z})),(0,r.kt)("h2",{id:"loginsecurity"},"login/security"),(0,r.kt)("p",null,"A login/password system has been set up to secure the data."),(0,r.kt)("p",null,"This connection using passport.js and the POST request done ine /static/login/login.js are almost the same that in ",(0,r.kt)("a",{href:"../frontend/frontend#security"},"frontend#security")," "),(0,r.kt)("p",null,"the database storing the login/password in ",(0,r.kt)("inlineCode",{parentName:"p"},"/database/db_acc.json"),"\nand looks like :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "id professeur 1 (username)" : "5868",\n    "id professeur 2" : "5868",\n    ...\n}\n')),(0,r.kt)("h2",{id:""},"?"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"}," Why no registration pages? "),"\nbecause the professor are theorically already in the concordia database."))}d.isMDXComponent=!0},4748:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/default-03fdb57a4d7cf929878007e7dc780b7a.png"},18:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/input1-d7f41a7f2ceaa0d3ffbdfbb36b7f48b2.png"},9963:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/input2-b9ac6861874a8eb9d9e041febc135aca.png"},9703:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/tracker-41ef7570183f3f1bd3b2b85a72f94819.png"}}]);